---
title: "周报"
tags: [thoughts]
---

始于 22.7.31

<!--more-->


<details>
  <summary>22.7.31 - 22.8.6</summary>

本周原计划是准备秋招，在周一干完了能应付一周的活后，周二突然来了个很急的需求，要求本周内完成，秋招的事就只能先放放了。

这个需求非常 CRUD，需要从服务器日志中解析出所有的用户 id，调用 rpc 接口去查询用户的更多数据，最后把数据通过 api 插入到 OLAP 数据库。

最终顺利在周五完成需求，事后总结有几点收获：

* 动态语言挺好用。setattr 能对库的类增加成员函数，减少很多冗余代码。不过对于其他语言，用 trait 也能满足我的需求
* 类型系统很重要，py 应该强制要求类型标注。内部库有一个函数调用类型匹配错误的 bug，该代码之前没被调用过，藏匿至今，不可思议。要是有类型标注，不致于此。想起之前跟面试官介绍 mypy 项目的被鄙夷的场面了
* 库函数向用户通知错误的方式，除了错误码就是抛出异常。这次的需求用 py2 编写，我采用抛出异常的方式，在主函数 catch 异常并写入日志，极大降低理清程序逻辑的心智负担，避免错误码层层传递，深刻感受到异常控制流的威力
* 以下代码并不等价
```
try:
    count += 1
except:
    count += 1
```

```
try:
    pass
except:
    pass
finally:
    count += 1
```
* 序列化反序列化意外地非常耗时。之前读 ddia 有这么一段话，大意是，内存数据库更快的原因不在于数据是存放在内存中，而是因为免去了数据打包解包的过程。如果内存足够大，基于磁盘的数据库也可以不需要磁盘 IO。当时将信将疑，现在总算见识到了
* 在思考业务的边界情况时，总结了一些方法论。比如函数的语义最好写成纯函数，逻辑性的 bug 通常出现在有副作用的变量上，需要着重关注有副作用变量经过的控制流，以及与该变量有关联的其他副作用变量。总结得还不太完善。我觉得形式化验证是不是就在关心这方面的工作，有空了解一下
* 公司内部的工具链太老了，吐槽已久。正好周一读了这篇[博文](https://xuanwo.io/reports/2022-25/)，有了更深的体会
</details>



<details>
  <summary>22.8.7 - 22.8.21</summary>

这两周在准备面试的东西，快速复习之前的笔记，发现好多细节都忘记了，可惜没太多时间去温习，只能走马观花，感觉有点手忙脚乱，不知道要干嘛了。

到目前为止投了 13 家公司，有回复的只有四家。简单记录接下来的安排

- [x] 13 号华为一二面
- [x] 14 号大疆笔试
- [x] 18 号寒武纪电面
- [x] 20 号华为主管面
- [x] 22 号转正相关工作

17 号刷脉脉时发现之前参加开源项目眼熟的大佬在发内推帖，加微信发了自己的简历。他看完提一口不很偏数据库。我自己心知肚明，但还是很沮丧。总结这几年的学习生涯，自己东学一点西学一点，蜻蜓点水，没有真正专注于一个领域去深挖。深感自己太菜了，眼界也狭窄。看了看大佬们的博客，整理了之后要学习的东西（接下来大概得毕业论文写完才有空了吧）。目前还是看看 leveldb，应付一下面试再说吧。

<details>
  <summary>TODO List</summary>

要读的书

- [ ] Readings in Database Systems
- [ ] 精通 LevelDB
- [ ] MySQL 技术内幕：InnoDB存储引擎
- [ ] 数据库查询优化器的艺术：原理解析与 SQL 性能优化
- [ ] 阅读[风空之枫的书单](https://github.com/mapleFU/MySQL-eight-legged)

要读的论文

- [ ] [C-Store: A Column-oriented DBMS](https://web.stanford.edu/class/cs345d-01/rl/cstore.pdf)
- [ ] [Wisckey](https://www.bilibili.com/read/cv13658411)、 [参考资料](https://www.zhihu.com/column/c_1452633136869416960)
- [ ] [卡比卡比的知乎专栏](https://www.zhihu.com/column/c_1440347225616953344)

要研究的项目

- [ ] boltdb [参考资料](https://zhuanlan.zhihu.com/p/391693148)
- [ ] TinyKV
- [ ] TinySql
- [ ] kvrocks

</details>

</details>

<details>
  <summary>22.8.22 - 22.8.28</summary>
  
22 号公司的转正通知下来了，leader 跟我说整个工作室都没 hc 可以转正。那也是没办法的事，遇上了就是遇上了，没办法就是没办法。

23 号看了篇[博文](https://www.tisonkun.org/2022/08/22/github-for-hrs/)，深感还是得多提高自己的影响力，多参与开源。

这周确定没 hc 后就光明正大摸鱼了。周三下午连续三场面试车轮战很累，寒武纪面得不好，领域知识确实不足。selectdb 面试体验极佳，上次这么聊得来的还是春招蚂蚁一面。蔚来面得中规中矩，一面挂有点意外。周五 selectdb 二面，面试体验也很好，希望能有好的结果。

- [x] 24 号寒武纪二面
- [x] 24 号 selectdb 一面
- [x] 24 号蔚来一面
- [x] 25 号学校中期答辩
- [x] 26 号 selectdb 二面
- [x] 27 号美团笔试
- [x] 26 号 selectdb 二面
</details>
